<?xml version="1.0" encoding="UTF-8" ?>
<roave-bc-check
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://github.com/Roave/BackwardCompatibilityCheck/raw/refs/heads/8.18.x/Resources/schema.xsd">
    <baseline>
        <!--
          In the 4.x branch, the baseline will contain all changes from the latest 3.x release, until we release
          4.0.0-alpha1.
          When we release 4.0.0-alpha1, we will reset the baseline so that it shows changes in 4.0.0 (or intermediate
          alpha/beta releases).
        -->

        <!--
          Adding strict types to a parameter may be a technical BC break, but historically we have not considered them
          to be if they match the phpdoc. Parameter type changes will be reviewed manually by maintainers.
        -->
        <ignored-regex>#CHANGED: The parameter .+? changed from no type to#</ignored-regex>

        <!-- these are `final public` methods and therefore safe to change even though the class is not final -->
        <ignored-regex>#CHANGED: The return type of Behat\\Testwork\\Environment\\StaticEnvironment\#getSuite\(\) changed#</ignored-regex>
        <ignored-regex>#CHANGED: The return type of Behat\\Testwork\\Environment\\Call\\EnvironmentCall\#getEnvironment\(\) changed#</ignored-regex>
        <ignored-regex>#CHANGED: The return type of Behat\\Testwork\\Environment\\Call\\EnvironmentCall\#getCallee\(\) changed#</ignored-regex>
        <ignored-regex>#CHANGED: The return type of Behat\\Testwork\\Environment\\Call\\EnvironmentCall\#getArguments\(\) changed#</ignored-regex>

        <!-- Addition of strict return types is expected throughout the 4.0 release -->
        <ignored-regex>#CHANGED: The return type of .+? changed from no type to#</ignored-regex>

        <!--
        When running in the 4.x branch, the BC checker installs symfony 8, therefore reports BC breaks in symfony
        classes that we extend (since the 3.x release it compares to installed symfony 7)
        -->
        <ignored-regex>#REMOVED: Method Symfony\\Component\\Console\\Command\\Command.+? was removed#</ignored-regex>
        <ignored-regex>#REMOVED: Method Symfony\\Component\\Console\\Application.+? was removed#</ignored-regex>

        <!-- Individually list removed methods / constants (which were deprecated in 3.x) -->
        <ignored-regex>#REMOVED: Method Behat\\Behat\\Output\\Node\\EventListener\\JUnit\\JUnitOutlineStoreListener\#getCurrentOutline\(\) was removed#</ignored-regex>
        <ignored-regex>#REMOVED: Constant Behat\\Behat\\ApplicationFactory::VERSION#</ignored-regex>

        <!--
        Group changes to constructors (e.g. removing deprecated params) by class. The BC checker reports errors for each
        parameter, but we don't need that level of granularity. It's enough to have a clear list of the classes that
        have changed).
        -->
        <ignored-regex>#REMOVED: Method Behat\\Behat\\EventDispatcher\\Cli\\StopOnFailureController\#__construct\(\) was removed#</ignored-regex>
        <ignored-regex>#CHANGED: The parameter .+? of Behat\\Behat\\Output\\Node\\Printer\\ListPrinter\#__construct\(\)#</ignored-regex>
        <ignored-regex>#CHANGED: The parameter .+? of Behat\\Behat\\Output\\Node\\Printer\\JUnit\\JUnitScenarioPrinter\#__construct\(\)#</ignored-regex>
        <ignored-regex>#CHANGED: (The parameter|Parameter) .+? of Behat\\Behat\\Definition\\Printer\\ConsoleDefinitionPrinter\#__construct\(\)#</ignored-regex>
        <ignored-regex>#CHANGED: The parameter .+? of Behat\\Testwork\\Ordering\\Cli\\OrderController\#__construct\(\)#</ignored-regex>

        <!--
        Annotation support removal: All annotation-based context readers and related classes have been removed.
        PHP 8 attributes are now the only supported way to define steps, hooks, and transformations.
        -->
        <ignored-regex>#REMOVED: Class Behat\\Behat\\.+?\\Annotation\\.+? has been deleted#</ignored-regex>
        <ignored-regex>#REMOVED: Class Behat\\Behat\\Context\\Reader\\AnnotatedContextReader has been deleted#</ignored-regex>
        <ignored-regex>#REMOVED: Method Behat\\Behat\\.+?\#loadAnnotationReader\(\) was removed#</ignored-regex>
        <ignored-regex>#REMOVED: Constant Behat\\Behat\\Context\\ServiceContainer\\ContextExtension::ANNOTATION_READER_TAG was removed#</ignored-regex>
    </baseline>
</roave-bc-check>
